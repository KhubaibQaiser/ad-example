!function(e){e.ShopsenseEmbeds=e.ShopsenseEmbeds||{},e.ShopsenseEmbeds.EmbedInjector=function(){const e={Skyscraper:"Skyscraper",Banner:"Banner",Leaderboard:"Leaderboard"},t={Skyscraper:{width:"160px",height:"600px"},Banner:{width:"468px",height:"60px"},Leaderboard:{width:"728px",height:"90px"}};const o=(e,t)=>{const o=document.createElement("div");o.id="shopsense-embed-loader",o.style.width=e,o.style.height=t,o.style.backgroundColor="#ff0000",o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.opacity=1,o.style.transition="opacity 0.5s ease",o.style.zIndex=10;return{loaderContainer:o,hideLoader:()=>{o.style.opacity=0,setTimeout((()=>{o.remove()}),500)}}},r=(e,t)=>{const o=document.createElement("div");return o.id="shopsense-embed-ad",o.style.width=e,o.style.height=t,o.style.zIndex=1,o};return{loadAd:async function(n){if(!n.containerId)throw new Error("containerId must be provided.");if(!n.embedId)throw new Error("embedId must be provided.");if(!n.template)throw new Error("template must be provided.");n.variation=n.variation||e.Skyscraper;const s=n.variation&&t[n.variation]||t.Skyscraper,d=s.width||"auto",a=s.height||"auto",i=`https://ad-example.vercel.app/ads/${n.embedId}/${n.template}/ad`,c=`${i}/index.html`,l=`${i}/assets`;try{const e=document.getElementById(n.containerId);if(!e)throw new Error(`Element with id="${n.containerId}" not found.`);e.style.position="relative",e.style.width=d,e.style.height=a,e.style.overflow="hidden";const{loaderContainer:t,hideLoader:s}=o(d,a);e.appendChild(t);const p=r(d,a);e.appendChild(p);const h=await fetch(c);if(!h.ok)throw new Error("Unable to fetch the ad content.");const m=await h.text(),u=document.createElement("div");u.innerHTML=m;const y=u.querySelectorAll("script"),w=u.querySelectorAll("link"),b=u.querySelectorAll("img"),f=u.querySelectorAll("video");console.log("FOUND",{scripts:y,links:w,images:b,videos:f}),w.forEach((e=>{const t=e.cloneNode(!0),o=t.href.split("/").pop();t.href=`${i}/${o}`,document.head.appendChild(t),e.remove()})),b.forEach((e=>{const t=e.src.split("/").pop();e.src=`${l}/${t}`})),f.forEach((e=>{const t=e.getAttribute("data-src")||e.src.split("/").pop();e.hasAttribute("data-src")?e.setAttribute("data-src",`${l}/${t}`):e.src=`${l}/${t}`,e.controls=!0})),p.innerHTML=u.innerHTML,setTimeout(s,250),y.forEach((e=>{const t=e.cloneNode(!0),o=t.src.split("/").pop();t.src=`${i}/${o}`,document.body.appendChild(t),e.remove()}))}catch(e){console.error("Error loading ad:",e)}},SupportedTemplates:{CuratedProducts:"curated-products-template",Carousel:"carousel-template"},SupportedVariations:e}}()}(window);