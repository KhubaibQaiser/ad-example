"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279,4967],{88023:function(e,t){t.Z={src:"/_next/static/media/tastemade-plus-text.d9a12c60.svg",height:20,width:191,blurWidth:0,blurHeight:0}},12121:function(e,t){t.Z={src:"/_next/static/media/empty-collection-thumbnail.95170bd0.png",height:2467,width:2400,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAFVBMVEX19fX6+vrx8fHGxsbV1dXi4uLf399zdGyZAAAACXBIWXMAACxLAAAsSwGlPZapAAAAJklEQVR4nGNgQAAmJiYmMIOZmZkZIsTGBqEZWVkZIQwWFggDDQAACK8AN5u3twEAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},72220:function(e,t,l){l.d(t,{Y0:function(){return d},j5:function(){return u},zo:function(){return p}});var n=l(85893),a=l(86010);l(67294);var i=l(9419),s=l(81279),r=l(30692),c=l(6638),o=l(12121);let d=e=>{var t,l,n,a,i,s,o;return null===(t=(null===(a=e.saved_recipes)||void 0===a?void 0:null===(n=a[0])||void 0===n?void 0:null===(l=n.saved_recipe)||void 0===l?void 0:l.recipe)&&(0,c.VY)(null===(o=e.saved_recipes)||void 0===o?void 0:null===(s=o[0])||void 0===s?void 0:null===(i=s.saved_recipe)||void 0===i?void 0:i.recipe,r.kjP.Square))||void 0===t?void 0:t.url},u=e=>{let{title:t,id:l,image:r,selected:c,disabled:d=!1,onClick:u}=e,p=(0,n.jsxs)("div",{className:(0,a.Z)("flex min-h-[54px] w-full flex-row items-center justify-start gap-2 overflow-hidden rounded-md border border-gray-400 pr-3",c?"bg-gray-200":"bg-white",d?"text-gray":"text-black"),children:[(0,n.jsx)(s.E,{alt:"",layout:"fill",objectFit:"cover",src:r||o.Z,wrapperClassName:"w-[54px] h-[54px] min-w-[54px] min-h-[54px] relative"}),(0,n.jsx)("p",{className:(0,a.Z)("line-clamp-2 flex-grow text-start",c&&"font-medium"),children:t}),(0,n.jsx)(i.J,{color:c?"green":"black",icon:c?"check":"plus",size:"xl"})]});return u?(0,n.jsx)("button",{"aria-label":"".concat(c?"remove recipe from":"add recipe to"," ").concat(t," collection"),className:"w-full",disabled:d,onClick:()=>null==u?void 0:u(l),type:"button",children:p}):p},p=e=>{let{tags:t,selectedTags:l,onTagClick:a}=e;return(0,n.jsx)("div",{className:"max-h-96 w-full overflow-y-auto",children:(0,n.jsx)("div",{className:"flex h-full flex-col items-center justify-center gap-1.5",children:t.map(e=>(0,n.jsx)(u,{id:e.id,image:d(e),onClick:a,selected:l[e.id],title:e.name},e.id))})})}},27525:function(e,t,l){l.d(t,{A:function(){return o}});var n=l(20567),a=l(14932),i=l(47702),s=l(85893);l(67294);var r=l(28220),c=l(7916);let o=e=>{var{mode:t,multipleRecipes:l=!1,selectedTags:o}=e,d=(0,i._)(e,["mode","multipleRecipes","selectedTags"]);let u=(0,n._)({timeout:3e3,variant:"success"},d),p="save"===t?"saved":"copy"===t?"copied":"moved";return 1===o.length?(0,s.jsx)(c.P,(0,a._)((0,n._)({},u),{children:(0,s.jsxs)("p",{children:["Your recipe",l?"s were":" was"," ",p," to"," ",(0,s.jsx)(r.r,{color:"black",href:"/account/saved-recipes/".concat(o[0].slug),children:o[0].name})]})})):(0,s.jsx)(c.P,(0,a._)((0,n._)({},u),{children:(0,s.jsxs)("p",{children:["Your recipe",l?"s were":" was"," ",p," to your"," ",(0,s.jsx)(r.r,{href:"/account/saved-recipes",children:"Virtual Recipe Box"})]})}))}},89411:function(e,t,l){l.r(t),l.d(t,{RecipeSaveModal:function(){return N}});var n=l(20567),a=l(14932),i=l(85893),s=l(86010),r=l(67294),c=l(38859),o=l(66016),d=l(88309),u=l(91572),p=l(72220),m=l(33630),h=l(82729),g=l(26997),x=l(30358);function v(){let e=(0,h._)(["\n    mutation DeleteSavedRecipeByRecipeId($recipe_id: uuid!) {\n  delete_saved_recipe_tag_maps(\n    where: {_and: {saved_recipe: {recipe: {id: {_eq: $recipe_id}}}}}\n  ) {\n    affected_rows\n  }\n  delete_saved_recipes(where: {recipe: {id: {_eq: $recipe_id}}}) {\n    returning {\n      id\n    }\n  }\n}\n    "]);return v=function(){return e},e}let A=(0,g.Ps)(v()),f=e=>{let{recipe:t,open:l,onClose:n,onCancel:a,onToggleRecipeSave:s,appear:r}=e,[,c]=x.Db(A);if(!t)return null;let o=async()=>{await c({recipe_id:t.id}),n(),null==s||s(t)};return(0,i.jsxs)(u.u_,{appear:r,layoutClassName:"flex flex-col gap-5",onClose:n,open:l,size:"xs",title:"Unsave Recipe",children:[(0,i.jsx)("div",{className:"mb-10 px-8 text-center",children:"The recipe will be unsaved from all collections and no longer in your Virtual Recipe Box."}),(0,i.jsxs)("div",{className:"flex flex-row space-x-2.5 px-8 pb-6",children:[(0,i.jsx)(d.z,{fullWidth:!0,onClick:a||n,variant:"gray",children:"Cancel"}),(0,i.jsx)(d.z,{fullWidth:!0,onClick:()=>void o(),variant:"red",children:"Unsave"})]})]})};var j=l(52150),w=l(27525),_=l(11635),b=l(4594),C=l(16406);let y=e=>{let{open:t,onClose:l,recipe:h,allRecipesThumbnail:g,onToggleRecipeSave:x}=e,[v,A]=(0,r.useState)("save"),[f,j]=(0,r.useState)(!1),{userId:y}=(0,c.qk)(),{open:N}=(0,o.Fp)(),[k,R]=(0,r.useState)({}),T=Object.keys(k).filter(e=>k[e]),S=T.length>0,[,E]=(0,C.As)(),[,P]=(0,C.pn)(),[{data:{saved_recipe_tags:z=[]}={}},U]=(0,b.T)({userId:y});if((0,r.useEffect)(()=>{t&&!N&&(A("save"),j(!1),R({}),U({requestPolicy:"network-only"}))},[t,N]),!h)return null;let D=async()=>{var e,t;let{data:n}=await E({recipe_id:h.id});if(null==x||x(h),S&&(null==n?void 0:null===(e=n.save_recipe)||void 0===e?void 0:e.id)){let e=null==n?void 0:null===(t=n.save_recipe)||void 0===t?void 0:t.id,l=T.map(t=>({saved_recipe_id:e,tag_id:t}));await P({saved_recipe_tag_maps:l})}l(),j(!0)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.u_,{appear:!0,onClose:l,open:t&&!N,title:(0,i.jsx)("h3",{className:"mb-[-16px] mt-2 px-5 text-center text-h-6 font-bold",children:"save"===v?"Save Recipe":"New Collection"}),children:["save"===v&&(0,i.jsxs)("div",{className:"flex h-full w-full flex-grow flex-col items-center justify-start gap-5 text-center",children:[(0,i.jsx)(p.j5,{disabled:!0,id:"ALL_RECIPES",image:g,selected:!0,title:"All Recipes"}),0===z.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"max-w-96",children:[(0,i.jsx)("p",{className:"font-medium",children:"Would you like to save it in another collection?"}),(0,i.jsx)("p",{children:"Create collections to organize your recipes."})]}),(0,i.jsx)(_.c,{layoutClassName:"w-fit",onClick:()=>A("createTag"),size:"sm",tagCount:z.length}),(0,i.jsx)(d.z,{layoutClassName:"w-32 mt-4",onClick:()=>void D(),variant:"black",children:"Save"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"w-full text-left",children:"Would you like to save it in another collection?"}),(0,i.jsx)(p.zo,{onTagClick:e=>{R((0,a._)((0,n._)({},k),{[e]:!k[e]}))},selectedTags:k,tags:z}),(0,i.jsxs)("div",{className:(0,s.Z)("flex w-full flex-col items-center justify-between gap-y-2 sm:flex-row"),children:[(0,i.jsx)(_.c,{layoutClassName:"w-full sm:w-fit",onClick:()=>A("createTag"),tagCount:z.length}),(0,i.jsx)(d.z,{layoutClassName:"w-full sm:w-32",onClick:()=>void D(),variant:"black",children:"Save"})]})]})]}),"createTag"===v&&(0,i.jsx)(m.Rh,{mode:"create",onCancel:()=>A("save"),onClose:l,onConfirm:e=>{U({requestPolicy:"network-only"}),R((0,a._)((0,n._)({},k),{[e.id]:!0})),A("save")},recipeTags:z})]}),(0,i.jsx)(w.A,{mode:"save",onClose:()=>j(!1),selectedTags:z.filter(e=>k[e.id]),show:f})]})},N=e=>{let{mode:t,open:l,onToggleRecipeSave:n,onClose:a,recipe:s,allRecipesThumbnail:r}=e,{isLoggedIn:o}=(0,c.qk)();return"save"===t&&o?(0,i.jsx)(y,{allRecipesThumbnail:r,onClose:a,onToggleRecipeSave:n,open:l,recipe:s}):"unsave"===t&&o?(0,i.jsx)(f,{onCancel:a,onClose:a,onToggleRecipeSave:n,open:l,recipe:s}):"gate"===t?(0,i.jsx)(j.TastemadePlusUpsellModal,{gateType:"SavedRecipes",onClose:a,open:l,recipe:s}):null}},4594:function(e,t,l){l.d(t,{T:function(){return i}});var n=l(52578),a=l(16406);let i=e=>{let{userId:t}=e;return(0,a.TU)({pause:!t,variables:{limit:n.F}})}},11635:function(e,t,l){l.d(t,{c:function(){return d}});var n=l(20567),a=l(14932),i=l(47702),s=l(85893),r=l(88309),c=l(81217),o=l(52578);let d=e=>{var{tagCount:t,variant:l,children:d,icon:u}=e,p=(0,i._)(e,["tagCount","variant","children","icon"]);let m=t>=o.F,h=(0,s.jsx)(r.z,(0,a._)((0,n._)({disabled:m,icon:u||"plus",variant:l||"gray"},p),{children:d||"Create New Collection"}));return m?(0,s.jsxs)(c.u,{TriggerComponent:h,hoverCloseTimeout:450,panelId:"create-new-collection-tooltip",children:["You've reached the maximum number of collections you can create (",o.F,")."]}):h}},33630:function(e,t,l){l.d(t,{Rh:function(){return w},lR:function(){return b}});var n=l(20567),a=l(14932),i=l(47702),s=l(85893),r=l(67294),c=l(88309),o=l(28220),d=l(91572),u=l(58485),p=l(82729),m=l(26997),h=l(30358);function g(){let e=(0,p._)(["\n    mutation CreateRecipeTag($name: String!, $slug: String!) {\n  insert_saved_recipe_tag(object: {name: $name, slug: $slug}) {\n    id\n    name\n    slug\n  }\n}\n    "]);return g=function(){return e},e}function x(){let e=(0,p._)(["\n    mutation EditRecipeTag($id: uuid!, $name: String!, $slug: String!) {\n  update_saved_recipe_tag(pk_columns: {id: $id}, _set: {slug: $slug, name: $name}) {\n    id\n    slug\n    name\n  }\n}\n    "]);return x=function(){return e},e}function v(){let e=(0,p._)(["\n    mutation DeleteRecipeTag($id: uuid!) {\n  delete_saved_recipe_tag_maps(where: {tag_id: {_eq: $id}}) {\n    affected_rows\n  }\n  delete_saved_recipe_tag(id: $id) {\n    id\n    name\n    slug\n  }\n}\n    "]);return v=function(){return e},e}let A=(0,m.Ps)(g()),f=(0,m.Ps)(x()),j=(0,m.Ps)(v()),w=e=>{let{onClose:t,onCancel:l,onConfirm:i,recipeTags:o,tag:d,mode:p}=e,[m,g]=(0,r.useState)(""),[x,v]=(0,r.useState)(""),[{fetching:j},w]=h.Db(A),[{fetching:_},b]=h.Db(f);(0,r.useEffect)(()=>{g((null==d?void 0:d.name)||"")},[null==d?void 0:d.name]);let C=async e=>{let t,l;e.preventDefault();let s=m.trim();if(!s)return v("Please choose a name for your collection.");if(!/^[\d\s'A-Za-z]+$/.test(s))return v("Only letters, numbers, spaces and ' are allowed.");if(s.length>40)return v("Please choose a shorter name.");let r=s.replaceAll(" ","-").replaceAll("'","").toLowerCase();if(o.some(e=>e.slug===r&&e.id!==(null==d?void 0:d.id)))return v("Please choose a different name.");if("create"===p){let{data:e,error:n}=await w({name:s,slug:r});t=null==e?void 0:e.insert_saved_recipe_tag,l=n}else{let{data:e,error:n}=await b({name:s,slug:r,id:d.id});t=null==e?void 0:e.update_saved_recipe_tag,l=n}if(l||!t)return v("Something went wrong, please try again later.");null==i||i((0,a._)((0,n._)({},t),{saved_recipes:[]}))};return(0,s.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:e=>void C(e),children:[(0,s.jsx)(u.n,{InputHelpTextProps:{status:"error"},helpText:x,inputRef:e=>e&&e.focus(),label:"Collection Name",maxLength:40,name:"collectionName",onChange:e=>{g(e.target.value),v("")},placeholder:"Meals",value:m}),(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)(c.z,{onClick:l||t,variant:"gray",children:"Cancel"}),(0,s.jsx)(c.z,{showLoading:j||_,type:"submit",variant:"black",children:"create"===p?"Create":"Edit"})]})]})},_=e=>{let{onClose:t,onCancel:l,onConfirm:i,tag:r}=e,[{fetching:d},u]=h.Db(j),p=async()=>{await u({id:r.id}),null==i||i((0,a._)((0,n._)({},r),{saved_recipes:[]}))};return(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"mb-10 text-center",children:["The recipes will remain in the"," ",(0,s.jsx)(o.r,{className:"font-bold text-black",href:"/account/saved-recipes/all",target:"_blank",children:"All Recipes"})," ","collection."]}),(0,s.jsxs)("div",{className:"flex flex-row space-x-2.5",children:[(0,s.jsx)(c.z,{fullWidth:!0,onClick:l||t,variant:"gray",children:"Cancel"}),(0,s.jsx)(c.z,{fullWidth:!0,onClick:()=>void p(),showLoading:d,variant:"red",children:"Delete"})]})]})},b=e=>{var{mode:t,open:l,onClose:a,tag:r,recipeTags:c}=e,o=(0,i._)(e,["mode","open","onClose","tag","recipeTags"]);return(0,s.jsxs)(d.u_,{appear:!0,onClose:a,open:l,title:"".concat("create"===t?"New":"edit"===t?"Edit":"Delete"," Collection"),children:["create"===t&&(0,s.jsx)(w,(0,n._)({mode:"create",onClose:a,recipeTags:c},o)),"edit"===t&&r&&(0,s.jsx)(w,(0,n._)({mode:"edit",onClose:a,recipeTags:c,tag:r},o)),"delete"===t&&r&&(0,s.jsx)(_,(0,n._)({onClose:a,tag:r},o))]})}},52150:function(e,t,l){l.r(t),l.d(t,{TastemadePlusUpsellModal:function(){return b}});var n=l(85893),a=l(67294),i=l(38859),s=l(66016),r=l(88309),c=l(75706),Image=l(81279),o=l(91572),d=l(10683),u=l(76184),p=l(70267),m=l(41679),h=l(30692),g=l(12463),x=l(96124),v=l(70493),A=l(46216),f={src:"/_next/static/media/tastemade-top.f0e0c46f.png",height:954,width:1319,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAXVBMVEXkyCTl3JPPvpW+sIDl4s7ezo7asm/PxYnZxrDIxK732grSzarYz5/t5cnkt27Tl27Uxr2tjn/5+PyPW2LPpFfv0BTnzADImVPk1mXf4uj+//jZu2j/6CDYmUjYwpq0NXfmAAAAGnRSTlMBd/qP1/7qECuUYmc7+fpvo/zwJ9sxVf1+ULcDhbsAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA5SURBVHicBcGJAkAgEEDBR8duIUeE0P9/phmQowsjoN7baoMyf6dLvRvI+zO11QiUt26LAsTrFvgBNkcCIuTd+8UAAAAASUVORK5CYII=",blurWidth:8,blurHeight:6},j={src:"/_next/static/media/tastemade-top-mobile.374fe5bc.png",height:315,width:615,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAASFBMVEVMaXHYrGD//8ncy8PvzH3x8u3gvpTs6r/gqBrr367m05jUunHnwW//5xXQ0tK4kDvhvG/ruH3oz1P67kDMzMroz1njoE24m3QyJbwuAAAAFXRSTlMA/hPd/v65OxC3uvylYKCbwKZcP4iJ48FoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAALElEQVR4nGMQFmDjExHiYGAQFGNkZRXnZ2BgY+RmYRFl5mBg5+Tk4uFlZwIAGPUBPSH7PmAAAAAASUVORK5CYII=",blurWidth:8,blurHeight:4},w=l(88023);let _=(e,t)=>(0,x.Q2)((0,p.$E)("recipe"),{[u.hu]:h.i1o.Yearly,[u.MN]:(null==e?void 0:e.slug)?"/recipes/".concat(e.slug).concat(t?"?".concat(d.ND,"=true"):""):"/recipes"}),b=e=>{let{open:t,onClose:l,gateType:d,recipe:u}=e,{products:p}=(0,m.oq)(),h=(0,v.d)(),{isLoggedIn:x}=(0,i.qk)(),{openAuthModal:b,closeAuthModal:C}=(0,s.Fp)(),[y,N]=(0,a.useState)(!1),k=()=>{C(),N(!1)},R=Math.ceil((0,g.uL)({products:p,billingPeriod:"monthly"})),T=((0,g.uL)({products:p,billingPeriod:"yearly"})/12).toFixed(2),S="SavedRecipes"===d;return(0,A.p)(t?{gate:S?"save-recipes":"view-recipes"}:{},!0),(0,n.jsx)(o.u_,{appear:!0,closeButton:!0,closeButtonBackground:"white",onClose:l,open:t&&!y,size:h?"sm":"md",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4 lg:gap-6",children:[(0,n.jsx)(Image.E,{alt:"Tastemade+",layout:"fill",src:w.Z,wrapperClassName:"relative w-48 h-5"}),h?(0,n.jsx)(Image.E,{alt:"",height:j.height||267,layout:"intrinsic",objectFit:"contain",src:j,width:j.width||360}):(0,n.jsx)(Image.E,{alt:"",height:f.height||267,layout:"intrinsic",objectFit:"contain",src:f,width:f.width||360}),(0,n.jsx)("h2",{className:"-mt-2 font-tiempos text-h-4 font-medium lg:mt-auto",children:"Still Hungry?"}),(0,n.jsxs)("p",{className:"text-center text-p-base",children:["You're out of ",S?"recipe saves":"free recipes this month",", but subscribe now and you'll get access to 12K+ recipes, unlimited cooking shows and documentaries, and much more."]}),(0,n.jsxs)("p",{"aria-label":"Just $".concat(T," per month for a year instead of $").concat(R),className:"text-center text-p-base font-medium",children:[(0,n.jsxs)("span",{className:"text-p-xl text-green",children:["Just ",(0,n.jsxs)("span",{className:"text-gray-400 line-through",children:["$",R]})," $",T,"/mo"]}),(0,n.jsx)("br",{}),"for a year."]}),(0,n.jsx)(c.Q,{href:_(u,S),layoutClassName:"w-full sm:w-50",variant:"black",children:"Subscribe"}),!x&&(0,n.jsxs)("span",{className:"text-p-sm",children:["Already a Member?\xa0",(0,n.jsx)(r.z,{onClick:()=>{N(!0),b("login",k)},variant:"text",children:"Log In"})]})]})})}}}]);