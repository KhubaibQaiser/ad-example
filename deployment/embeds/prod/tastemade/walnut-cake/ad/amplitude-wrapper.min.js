!function(){window.ShopsenseEmbeds=window.ShopsenseEmbeds||{},window.ShopsenseEmbeds.env="production";window.ShopsenseEmbeds.getUtmParams=()=>{const e=new URLSearchParams(window.location.search);if(!e||!e.get("utm_source")){const e=Object.keys(window.ShopsenseEmbeds.trackingData),t={};return e.forEach((e=>{e.includes("utm_")&&(t[e]=window.ShopsenseEmbeds.trackingData[e])})),t}return{utm_source:e.get("utm_source"),utm_medium:e.get("utm_medium"),utm_campaign:e.get("utm_campaign"),utm_term:e.get("utm_term"),utm_content:e.get("utm_content")}};const e=e=>{if(window.ShopsenseEmbeds.utmParams=e||{},Object.values(window.ShopsenseEmbeds.utmParams).length){const e=new amplitude.Identify;for(const[t,n]of Object.entries(window.ShopsenseEmbeds.utmParams))n&&e.set(t,n);window.ShopsenseEmbeds.amplitude.identify(e)}},t=()=>{window.ShopsenseEmbeds.amplitude=window.amplitude||{},window.ShopsenseEmbeds.amplitude.init("7f43e3804ae8258217c76786327d76a8",{autocapture:!1,includeUtm:!0,trackingOptions:{deviceModel:!1,deviceId:!1,osName:!1,osVersion:!1,os:!1,family:!1,platform:!1,ipAddress:!1}}),window.addEventListener("message",(t=>{t&&t.data&&"object"==typeof t.data&&!Array.isArray(t.data)&&Object.keys(t.data).length&&"utm_source"in t.data&&e(t.data)})),window.ShopsenseEmbeds.trackingData={session_id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),ad_id:"",campaign_id:"",utm_source:"tastemade",utm_medium:"shopsense_embed",utm_campaign:"walnut-cake",utm_term:"",utm_content:""},e(window.ShopsenseEmbeds.getUtmParams())};var n={};window.ShopsenseEmbeds.analytics={logEvent:(e,t={})=>{const s=`Embed - ${e}`,o=`${s}${JSON.stringify(t)}`;n[o]||(n[o]=JSON.stringify(t),"production"===window.ShopsenseEmbeds.env&&window.ShopsenseEmbeds.amplitude.logEvent(s,Object.assign({},t,{...window.ShopsenseEmbeds.trackingData,display_id:`${window.ShopsenseEmbeds.trackingData.session_id}-${(new Date).toISOString()}`,referrer_domain:window.location.hostname})))}},document.addEventListener("DOMContentLoaded",t),document.addEventListener("ShopsenseEmbedInjected",t)}();