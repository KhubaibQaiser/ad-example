!function(){window.ShopsenseEmbeds=window.ShopsenseEmbeds||{};const a={awin:{params:["clickref"],subParams:'{"clickref2"}'},cj:{params:["sid"],subParams:'{"aid"}'},ebay:{params:["customid"],subParams:"{}"},impact:{params:["subId1"],subParams:'{"subId2"}'},partnerize:{params:["pubref"],subParams:'{"p_id"}'},rakuten:{params:["u1"],subParams:'{"subId"}'},sovrn:{params:["cuid"],subParams:""},shareasale:{params:["afftrack"],subParams:""},ascend:{params:["clid"],subParams:'{"website"}'},amazon:{params:["tag"],subParams:'{"tag"}'}};window.ShopsenseEmbeds.getTrackingUrl=({ulid:e,product:r,isProd:s=!1})=>{const n="embed",t=r.retailer?.affiliate?.name?.trim(),c=r.retailer?.affiliate?.handle?.trim(),i=t?a[c.toLowerCase()]?.params:null;if(!s)return r.non_affiliate_url?r.non_affiliate_url:r.url;if(!i||i.length<=0)return r.url;const p=`${e}-${n}`,m=t?.toLowerCase(),o=new URL(r.url),d=i[0];switch(m){case"partnerize":const a=o.pathname.split("/"),s=a.findIndex((a=>a.includes("camref")));s>0&&(a.splice(s+1,0,`${d}:${p}`),o.pathname=a.join("/"));break;case"cj":const t=new URLSearchParams(o.search);t.append(d,p),o.search=t.toString();break;case"awin":const c=new URLSearchParams(o.search),m=new URLSearchParams;c.forEach(((a,e)=>{"ued"===e&&m.append(d,p),m.append(e,a)})),c.has("ued")||m.append(d,p),o.search=m.toString();break;case"connexity":const u=new URLSearchParams(o.search),[l,h,b]=i;if(l&&u.append(l,n),h&&u.append(h,r.collection.handle),b){const a=`${e}TPDASH${n.replaceAll("-","SHDASH")}`;u.append(b,a)}o.search=u.toString();break;default:const f=new URLSearchParams(o.search);f.append(d,p),o.search=f.toString()}return o.toString()}}();